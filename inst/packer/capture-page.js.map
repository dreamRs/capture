{"version":3,"file":"capture-page.js","mappings":"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","sources":["webpack://capture/./node_modules/@xata.io/screenshot/dist/index.js","webpack://capture/./node_modules/file-saver/dist/FileSaver.min.js","webpack://capture/webpack/bootstrap","webpack://capture/webpack/runtime/global","webpack://capture/./srcjs/modules/utils.js","webpack://capture/./srcjs/exts/page.js"],"sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.XataScreenshot = {}));\n})(this, (function (exports) { 'use strict';\n\n    /**\n     * Checks if the current browser supports the MediaDevices API.\n     */\n    const checkIfBrowserSupported = () => { var _a; return Boolean((_a = navigator.mediaDevices) === null || _a === void 0 ? void 0 : _a.getDisplayMedia); };\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation.\r\n\r\n    Permission to use, copy, modify, and/or distribute this software for any\r\n    purpose with or without fee is hereby granted.\r\n\r\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n    PERFORMANCE OF THIS SOFTWARE.\r\n    ***************************************************************************** */\r\n\r\n    function __awaiter(thisArg, _arguments, P, generator) {\r\n        function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n            function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n            function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    }\n\n    const createVideoElementToCaptureFrames = (mediaStream) => {\n        const video = document.createElement(\"video\");\n        video.autoplay = true;\n        video.muted = true;\n        video.playsInline = true;\n        video.srcObject = mediaStream;\n        video.setAttribute(\"style\", \"position:fixed;top:0;left:0;pointer-events:none;visibility:hidden;\");\n        return video;\n    };\n\n    const paintVideoFrameOnCanvas = (video) => {\n        var _a, _b, _c;\n        // Get the video settings\n        // @ts-ignore because getTracks is very much valid in modern browsers\n        const videoTrackSettings = (_a = video.srcObject) === null || _a === void 0 ? void 0 : _a.getTracks()[0].getSettings();\n        // Create a canvas with the video's size and draw the video frame on it\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = (_b = videoTrackSettings === null || videoTrackSettings === void 0 ? void 0 : videoTrackSettings.width) !== null && _b !== void 0 ? _b : 0;\n        canvas.height = (_c = videoTrackSettings === null || videoTrackSettings === void 0 ? void 0 : videoTrackSettings.height) !== null && _c !== void 0 ? _c : 0;\n        const ctx = canvas.getContext(\"2d\");\n        ctx === null || ctx === void 0 ? void 0 : ctx.drawImage(video, 0, 0);\n        return canvas;\n    };\n\n    const playCameraClickSound = (url) => {\n        const audio = document.createElement(\"audio\");\n        audio.loop = false;\n        audio.src = url;\n        audio.play();\n        audio.remove();\n    };\n\n    const sleep = (timeoutInMs = 300) => new Promise((r) => {\n        setTimeout(r, timeoutInMs);\n    });\n\n    const stopCapture = (video) => {\n        var _a;\n        // @ts-ignore because getTracks is very much valid in modern browsers\n        const tracks = (_a = video.srcObject) === null || _a === void 0 ? void 0 : _a.getTracks();\n        tracks === null || tracks === void 0 ? void 0 : tracks.forEach((track) => track.stop());\n        // This is the only way to clean up a video stream in the browser so...\n        // eslint-disable-next-line no-param-reassign\n        video.srcObject = null;\n        video.remove();\n    };\n\n    const waitForFocus = (result) => __awaiter(void 0, void 0, void 0, function* () {\n        yield sleep();\n        if (document.hasFocus()) {\n            return result;\n        }\n        return waitForFocus(result);\n    });\n\n    /**\n     * Takes a screenshot of the current page using a the native browser [`MediaDevices`](https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getDisplayMedia) API.\n     */\n    const takeScreenshot = ({ onCaptureEnd, onCaptureStart, quality = 0.7, type = \"image/jpeg\", soundEffectUrl, } = {}) => __awaiter(void 0, void 0, void 0, function* () {\n        yield (onCaptureStart === null || onCaptureStart === void 0 ? void 0 : onCaptureStart());\n        return navigator.mediaDevices\n            .getDisplayMedia({\n            // This is actually supported, but only in Chrome so not yet part of the TS typedefs, so\n            // @ts-ignore\n            preferCurrentTab: true,\n            video: { frameRate: 30 },\n        })\n            .then(waitForFocus) // We can only proceed if our tab is in focus.\n            .then((result) => __awaiter(void 0, void 0, void 0, function* () {\n            // So we mount the screen capture to a video element...\n            const video = createVideoElementToCaptureFrames(result);\n            // ...which needs to be in the DOM but invisible so we can capture it.\n            document.body.appendChild(video);\n            // Now, we need to wait a bit to capture the right moment...\n            // Hide this modal...\n            // Play camera click sound, because why not\n            if (soundEffectUrl) {\n                playCameraClickSound(soundEffectUrl);\n            }\n            // Wait for the video feed...\n            yield sleep();\n            // Paint the video frame on a canvas...\n            const canvas = paintVideoFrameOnCanvas(video);\n            // Set the data URL in state\n            const screenshot = canvas.toDataURL(type, quality);\n            // Stop sharing screen.\n            stopCapture(video);\n            // Clean up\n            canvas.remove();\n            yield (onCaptureEnd === null || onCaptureEnd === void 0 ? void 0 : onCaptureEnd());\n            return screenshot;\n        }));\n    });\n\n    exports.checkIfBrowserSupported = checkIfBrowserSupported;\n    exports.takeScreenshot = takeScreenshot;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open(\"GET\",a),d.responseType=\"blob\",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error(\"could not download file\")},d.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open(\"\",\"_blank\"),g&&(g.document.title=g.document.body.innerText=\"downloading...\"),\"string\"==typeof b)return c(b,d,e);var h=\"application/octet-stream\"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&\"undefined\"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,\"undefined\"!=typeof module&&(module.exports=g)});\n\n//# sourceMappingURL=FileSaver.min.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","export function elOrParentHasClass(element, classname) {\n  if (\n    typeof element.classList !== \"undefined\" &&\n    element.classList.contains(classname)\n  )\n    return true;\n  return (\n    element.parentNode && elOrParentHasClass(element.parentNode, classname)\n  );\n}\n\nexport function validateEl(element, classname) {\n  if (\n    typeof element.classList !== \"undefined\" &&\n    element.classList.contains(classname)\n  )\n    return element;\n  return validateEl(element.parentNode, classname);\n}\n\n","import { checkIfBrowserSupported, takeScreenshot } from '@xata.io/screenshot';\r\nimport { saveAs } from \"file-saver\";\r\nimport * as utils from \"../modules/utils\";\r\n\r\n(function() {\r\n  // IMAGE\r\n  function capurePage(event) {\r\n    var el = event.target;\r\n    if (!utils.elOrParentHasClass(el, \"btn-capture-page\")) {\r\n      return;\r\n    }\r\n    el = utils.validateEl(el, \"btn-capture-page\");\r\n    if (!checkIfBrowserSupported()) {\r\n      alert(\r\n        \"Screenshot functionnality is not supported.\"\r\n      );\r\n    }\r\n    el.classList.add(\"disabled\");\r\n    var fileName = el.getAttribute(\"data-filename\");\r\n    var inputId = el.getAttribute(\"data-inputId\");\r\n    \r\n    takeScreenshot()\r\n      .then(function(screenshot) {\r\n        if (fileName !== null) {\r\n          saveAs(screenshot, fileName);\r\n        }\r\n        if (inputId !== null) {\r\n          Shiny.setInputValue(inputId, screenshot);\r\n        }\r\n        el.classList.remove(\"disabled\");\r\n      })\r\n      .catch(function(error) {\r\n        console.error(\"Capture: oops, something went wrong!\", error);\r\n      });\r\n  }\r\n  function capurePage_(event) {\r\n    try {\r\n      capurePage(event);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n  document.addEventListener(\"click\", capurePage_);\r\n})();\r\n"],"names":["exports","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","sleep","timeoutInMs","r","setTimeout","waitForFocus","document","hasFocus","checkIfBrowserSupported","_a","Boolean","navigator","mediaDevices","getDisplayMedia","takeScreenshot","onCaptureEnd","onCaptureStart","quality","type","soundEffectUrl","preferCurrentTab","video","frameRate","mediaStream","createElement","autoplay","muted","playsInline","srcObject","setAttribute","createVideoElementToCaptureFrames","body","appendChild","url","audio","loop","src","play","remove","playCameraClickSound","canvas","_b","_c","videoTrackSettings","getTracks","getSettings","width","height","ctx","getContext","drawImage","paintVideoFrameOnCanvas","screenshot","toDataURL","tracks","forEach","track","stop","stopCapture","Object","defineProperty","factory","c","a","b","d","XMLHttpRequest","open","responseType","onload","g","response","onerror","console","error","send","status","dispatchEvent","MouseEvent","createEvent","initMouseEvent","window","f","self","global","test","userAgent","saveAs","HTMLAnchorElement","prototype","h","i","URL","webkitURL","j","name","download","rel","href","origin","location","target","createObjectURL","revokeObjectURL","msSaveOrOpenBlob","autoBom","warn","Blob","title","innerText","HTMLElement","safari","FileReader","k","onloadend","replace","readAsDataURL","l","m","module","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","call","globalThis","this","Function","elOrParentHasClass","element","classname","classList","contains","parentNode","validateEl","capurePage","event","el","alert","add","fileName","getAttribute","inputId","Shiny","setInputValue","catch","addEventListener"],"sourceRoot":""}