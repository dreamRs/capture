{"version":3,"file":"capture-img.js","mappings":"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","sources":["webpack://capture/./node_modules/file-saver/dist/FileSaver.min.js","webpack://capture/webpack/bootstrap","webpack://capture/webpack/runtime/global","webpack://capture/external var \"Shiny\"","webpack://capture/./node_modules/html-to-image/es/util.js","webpack://capture/./node_modules/html-to-image/es/getBlobFromURL.js","webpack://capture/./node_modules/html-to-image/es/clonePseudoElements.js","webpack://capture/./node_modules/html-to-image/es/cloneNode.js","webpack://capture/./node_modules/html-to-image/es/embedResources.js","webpack://capture/./node_modules/html-to-image/es/embedImages.js","webpack://capture/./node_modules/html-to-image/es/embedWebFonts.js","webpack://capture/./node_modules/html-to-image/es/index.js","webpack://capture/./node_modules/html-to-image/es/applyStyleWithOptions.js","webpack://capture/./srcjs/exts/utils.js","webpack://capture/./srcjs/exts/capture-img.js"],"sourcesContent":["(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open(\"GET\",a),d.responseType=\"blob\",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error(\"could not download file\")},d.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open(\"\",\"_blank\"),g&&(g.document.title=g.document.body.innerText=\"downloading...\"),\"string\"==typeof b)return c(b,d,e);var h=\"application/octet-stream\"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&\"undefined\"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,\"undefined\"!=typeof module&&(module.exports=g)});\n\n//# sourceMappingURL=FileSaver.min.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","const __WEBPACK_NAMESPACE_OBJECT__ = Shiny;","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nconst WOFF = 'application/font-woff';\nconst JPEG = 'image/jpeg';\nconst mimes = {\n    woff: WOFF,\n    woff2: WOFF,\n    ttf: 'application/font-truetype',\n    eot: 'application/vnd.ms-fontobject',\n    png: 'image/png',\n    jpg: JPEG,\n    jpeg: JPEG,\n    gif: 'image/gif',\n    tiff: 'image/tiff',\n    svg: 'image/svg+xml',\n};\nexport function getExtension(url) {\n    const match = /\\.([^./]*?)$/g.exec(url);\n    return match ? match[1] : '';\n}\nexport function getMimeType(url) {\n    const extension = getExtension(url).toLowerCase();\n    return mimes[extension] || '';\n}\nexport function resolveUrl(url, baseUrl) {\n    // url is absolute already\n    if (url.match(/^[a-z]+:\\/\\//i)) {\n        return url;\n    }\n    // url is absolute already, without protocol\n    if (url.match(/^\\/\\//)) {\n        return window.location.protocol + url;\n    }\n    // dataURI, mailto:, tel:, etc.\n    if (url.match(/^[a-z]+:/i)) {\n        return url;\n    }\n    const doc = document.implementation.createHTMLDocument();\n    const base = doc.createElement('base');\n    const a = doc.createElement('a');\n    doc.head.appendChild(base);\n    doc.body.appendChild(a);\n    if (baseUrl) {\n        base.href = baseUrl;\n    }\n    a.href = url;\n    return a.href;\n}\nexport function isDataUrl(url) {\n    return url.search(/^(data:)/) !== -1;\n}\nexport function makeDataUrl(content, mimeType) {\n    return `data:${mimeType};base64,${content}`;\n}\nexport function parseDataUrlContent(dataURL) {\n    return dataURL.split(/,/)[1];\n}\nexport const uuid = (function uuid() {\n    // generate uuid for className of pseudo elements.\n    // We should not use GUIDs, otherwise pseudo elements sometimes cannot be captured.\n    let counter = 0;\n    // ref: http://stackoverflow.com/a/6248722/2519373\n    const random = () => \n    // eslint-disable-next-line no-bitwise\n    `0000${((Math.random() * Math.pow(36, 4)) << 0).toString(36)}`.slice(-4);\n    return () => {\n        counter += 1;\n        return `u${random()}${counter}`;\n    };\n})();\nexport const delay = (ms) => (args) => new Promise((resolve) => setTimeout(() => resolve(args), ms));\nexport function toArray(arrayLike) {\n    const arr = [];\n    for (let i = 0, l = arrayLike.length; i < l; i += 1) {\n        arr.push(arrayLike[i]);\n    }\n    return arr;\n}\nfunction px(node, styleProperty) {\n    const val = window.getComputedStyle(node).getPropertyValue(styleProperty);\n    return parseFloat(val.replace('px', ''));\n}\nexport function getNodeWidth(node) {\n    const leftBorder = px(node, 'border-left-width');\n    const rightBorder = px(node, 'border-right-width');\n    return node.clientWidth + leftBorder + rightBorder;\n}\nexport function getNodeHeight(node) {\n    const topBorder = px(node, 'border-top-width');\n    const bottomBorder = px(node, 'border-bottom-width');\n    return node.clientHeight + topBorder + bottomBorder;\n}\nexport function getPixelRatio() {\n    let ratio;\n    let FINAL_PROCESS;\n    try {\n        FINAL_PROCESS = process;\n    }\n    catch (e) {\n        // pass\n    }\n    const val = FINAL_PROCESS && FINAL_PROCESS.env\n        ? FINAL_PROCESS.env.devicePixelRatio\n        : null;\n    if (val) {\n        ratio = parseInt(val, 10);\n        if (Number.isNaN(ratio)) {\n            ratio = 1;\n        }\n    }\n    return ratio || window.devicePixelRatio || 1;\n}\nexport function canvasToBlob(canvas) {\n    if (canvas.toBlob) {\n        return new Promise((resolve) => canvas.toBlob(resolve));\n    }\n    return new Promise((resolve) => {\n        const binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n        const len = binaryString.length;\n        const binaryArray = new Uint8Array(len);\n        for (let i = 0; i < len; i += 1) {\n            binaryArray[i] = binaryString.charCodeAt(i);\n        }\n        resolve(new Blob([binaryArray], { type: 'image/png' }));\n    });\n}\nexport function createImage(url) {\n    return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => resolve(img);\n        img.onerror = reject;\n        img.crossOrigin = 'anonymous';\n        img.decoding = 'sync';\n        img.src = url;\n    });\n}\nexport function svgToDataURL(svg) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return Promise.resolve()\n            .then(() => new XMLSerializer().serializeToString(svg))\n            .then(encodeURIComponent)\n            .then((html) => `data:image/svg+xml;charset=utf-8,${html}`);\n    });\n}\nexport function nodeToDataURL(node, width, height) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const xmlns = 'http://www.w3.org/2000/svg';\n        const svg = document.createElementNS(xmlns, 'svg');\n        const foreignObject = document.createElementNS(xmlns, 'foreignObject');\n        svg.setAttribute('width', `${width}`);\n        svg.setAttribute('height', `${height}`);\n        svg.setAttribute('viewBox', `0 0 ${width} ${height}`);\n        foreignObject.setAttribute('width', '100%');\n        foreignObject.setAttribute('height', '100%');\n        foreignObject.setAttribute('x', '0');\n        foreignObject.setAttribute('y', '0');\n        foreignObject.setAttribute('externalResourcesRequired', 'true');\n        svg.appendChild(foreignObject);\n        foreignObject.appendChild(node);\n        return svgToDataURL(svg);\n    });\n}\n//# sourceMappingURL=util.js.map","import { parseDataUrlContent } from './util';\nconst cache = {};\nfunction getCacheKey(url) {\n    let key = url.replace(/\\?.*/, '');\n    // font resourse\n    if (/ttf|otf|eot|woff2?/i.test(key)) {\n        key = key.replace(/.*\\//, '');\n    }\n    return key;\n}\nexport function getBlobFromURL(url, options) {\n    const cacheKey = getCacheKey(url);\n    if (cache[cacheKey] != null) {\n        return cache[cacheKey];\n    }\n    // cache bypass so we dont have CORS issues with cached images\n    // ref: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n    if (options.cacheBust) {\n        // eslint-disable-next-line no-param-reassign\n        url += (/\\?/.test(url) ? '&' : '?') + new Date().getTime();\n    }\n    const failed = (reason) => {\n        let placeholder = '';\n        if (options.imagePlaceholder) {\n            const parts = options.imagePlaceholder.split(/,/);\n            if (parts && parts[1]) {\n                placeholder = parts[1];\n            }\n        }\n        let msg = `Failed to fetch resource: ${url}`;\n        if (reason) {\n            msg = typeof reason === 'string' ? reason : reason.message;\n        }\n        if (msg) {\n            console.error(msg);\n        }\n        return {\n            blob: placeholder,\n            contentType: '',\n        };\n    };\n    const deferred = window\n        .fetch(url)\n        .then((res) => \n    // eslint-disable-next-line promise/no-nesting\n    res.blob().then((blob) => ({\n        blob,\n        contentType: res.headers.get('Content-Type') || '',\n    })))\n        .then(({ blob, contentType }) => new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onloadend = () => resolve({\n            contentType,\n            blob: reader.result,\n        });\n        reader.onerror = reject;\n        reader.readAsDataURL(blob);\n    }))\n        .then(({ blob, contentType }) => ({\n        contentType,\n        blob: parseDataUrlContent(blob),\n    }))\n        // on failed\n        .catch(failed);\n    // cache result\n    cache[cacheKey] = deferred;\n    return deferred;\n}\n//# sourceMappingURL=getBlobFromURL.js.map","import { uuid, toArray } from './util';\nfunction formatCSSText(style) {\n    const content = style.getPropertyValue('content');\n    return `${style.cssText} content: '${content.replace(/'|\"/g, '')}';`;\n}\nfunction formatCSSProperties(style) {\n    return toArray(style)\n        .map((name) => {\n        const value = style.getPropertyValue(name);\n        const priority = style.getPropertyPriority(name);\n        return `${name}: ${value}${priority ? ' !important' : ''};`;\n    })\n        .join(' ');\n}\nfunction getPseudoElementStyle(className, pseudo, style) {\n    const selector = `.${className}:${pseudo}`;\n    const cssText = style.cssText\n        ? formatCSSText(style)\n        : formatCSSProperties(style);\n    return document.createTextNode(`${selector}{${cssText}}`);\n}\nfunction clonePseudoElement(nativeNode, clonedNode, pseudo) {\n    const style = window.getComputedStyle(nativeNode, pseudo);\n    const content = style.getPropertyValue('content');\n    if (content === '' || content === 'none') {\n        return;\n    }\n    const className = uuid();\n    try {\n        clonedNode.className = `${clonedNode.className} ${className}`;\n    }\n    catch (err) {\n        return;\n    }\n    const styleElement = document.createElement('style');\n    styleElement.appendChild(getPseudoElementStyle(className, pseudo, style));\n    clonedNode.appendChild(styleElement);\n}\nexport function clonePseudoElements(nativeNode, clonedNode) {\n    clonePseudoElement(nativeNode, clonedNode, ':before');\n    clonePseudoElement(nativeNode, clonedNode, ':after');\n}\n//# sourceMappingURL=clonePseudoElements.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { getBlobFromURL } from './getBlobFromURL';\nimport { clonePseudoElements } from './clonePseudoElements';\nimport { createImage, getMimeType, makeDataUrl, toArray } from './util';\nfunction cloneCanvasElement(node) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const dataURL = node.toDataURL();\n        if (dataURL === 'data:,') {\n            return Promise.resolve(node.cloneNode(false));\n        }\n        return createImage(dataURL);\n    });\n}\nfunction cloneVideoElement(node, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return Promise.resolve(node.poster)\n            .then((url) => getBlobFromURL(url, options))\n            .then((data) => makeDataUrl(data.blob, getMimeType(node.poster) || data.contentType))\n            .then((dataURL) => createImage(dataURL));\n    });\n}\nfunction cloneSingleNode(node, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (node instanceof HTMLCanvasElement) {\n            return cloneCanvasElement(node);\n        }\n        if (node instanceof HTMLVideoElement && node.poster) {\n            return cloneVideoElement(node, options);\n        }\n        return Promise.resolve(node.cloneNode(false));\n    });\n}\nconst isSlotElement = (node) => node.tagName != null && node.tagName.toUpperCase() === 'SLOT';\nfunction cloneChildren(nativeNode, clonedNode, options) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const children = isSlotElement(nativeNode) && nativeNode.assignedNodes\n            ? toArray(nativeNode.assignedNodes())\n            : toArray(((_a = nativeNode.shadowRoot) !== null && _a !== void 0 ? _a : nativeNode).childNodes);\n        if (children.length === 0 || nativeNode instanceof HTMLVideoElement) {\n            return Promise.resolve(clonedNode);\n        }\n        return children\n            .reduce((deferred, child) => deferred\n            // eslint-disable-next-line no-use-before-define\n            .then(() => cloneNode(child, options))\n            .then((clonedChild) => {\n            // eslint-disable-next-line promise/always-return\n            if (clonedChild) {\n                clonedNode.appendChild(clonedChild);\n            }\n        }), Promise.resolve())\n            .then(() => clonedNode);\n    });\n}\nfunction cloneCSSStyle(nativeNode, clonedNode) {\n    const source = window.getComputedStyle(nativeNode);\n    const target = clonedNode.style;\n    if (!target) {\n        return;\n    }\n    if (source.cssText) {\n        target.cssText = source.cssText;\n    }\n    else {\n        toArray(source).forEach((name) => {\n            target.setProperty(name, source.getPropertyValue(name), source.getPropertyPriority(name));\n        });\n    }\n}\nfunction cloneInputValue(nativeNode, clonedNode) {\n    if (nativeNode instanceof HTMLTextAreaElement) {\n        clonedNode.innerHTML = nativeNode.value;\n    }\n    if (nativeNode instanceof HTMLInputElement) {\n        clonedNode.setAttribute('value', nativeNode.value);\n    }\n}\nfunction decorate(nativeNode, clonedNode) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!(clonedNode instanceof Element)) {\n            return Promise.resolve(clonedNode);\n        }\n        return Promise.resolve()\n            .then(() => cloneCSSStyle(nativeNode, clonedNode))\n            .then(() => clonePseudoElements(nativeNode, clonedNode))\n            .then(() => cloneInputValue(nativeNode, clonedNode))\n            .then(() => clonedNode);\n    });\n}\nexport function cloneNode(node, options, isRoot) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!isRoot && options.filter && !options.filter(node)) {\n            return Promise.resolve(null);\n        }\n        return Promise.resolve(node)\n            .then((clonedNode) => cloneSingleNode(clonedNode, options))\n            .then((clonedNode) => cloneChildren(node, clonedNode, options))\n            .then((clonedNode) => decorate(node, clonedNode));\n    });\n}\n//# sourceMappingURL=cloneNode.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { getBlobFromURL } from './getBlobFromURL';\nimport { getMimeType, isDataUrl, makeDataUrl, resolveUrl } from './util';\nconst URL_REGEX = /url\\((['\"]?)([^'\"]+?)\\1\\)/g;\nconst URL_WITH_FORMAT_REGEX = /url\\([^)]+\\)\\s*format\\(([\"'])([^\"']+)\\1\\)/g;\nconst FONT_SRC_REGEX = /src:\\s*(?:url\\([^)]+\\)\\s*format\\([^)]+\\)[,;]\\s*)+/g;\nexport function toRegex(url) {\n    // eslint-disable-next-line no-useless-escape\n    const escaped = url.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n    return new RegExp(`(url\\\\(['\"]?)(${escaped})(['\"]?\\\\))`, 'g');\n}\nexport function parseURLs(cssText) {\n    const result = [];\n    cssText.replace(URL_REGEX, (raw, quotation, url) => {\n        result.push(url);\n        return raw;\n    });\n    return result.filter((url) => !isDataUrl(url));\n}\nexport function embed(cssText, resourceURL, baseURL, options, get) {\n    const resolvedURL = baseURL ? resolveUrl(resourceURL, baseURL) : resourceURL;\n    return Promise.resolve(resolvedURL)\n        .then((url) => get ? get(url) : getBlobFromURL(url, options))\n        .then((data) => {\n        if (typeof data === 'string') {\n            return makeDataUrl(data, getMimeType(resourceURL));\n        }\n        return makeDataUrl(data.blob, getMimeType(resourceURL) || data.contentType);\n    })\n        .then((dataURL) => cssText.replace(toRegex(resourceURL), `$1${dataURL}$3`))\n        .then((content) => content, () => resolvedURL);\n}\nfunction filterPreferredFontFormat(str, { preferredFontFormat }) {\n    return !preferredFontFormat\n        ? str\n        : str.replace(FONT_SRC_REGEX, (match) => {\n            // eslint-disable-next-line no-constant-condition\n            while (true) {\n                const [src, , format] = URL_WITH_FORMAT_REGEX.exec(match) || [];\n                if (!format) {\n                    return '';\n                }\n                if (format === preferredFontFormat) {\n                    return `src: ${src};`;\n                }\n            }\n        });\n}\nexport function shouldEmbed(url) {\n    return url.search(URL_REGEX) !== -1;\n}\nexport function embedResources(cssText, baseUrl, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!shouldEmbed(cssText)) {\n            return Promise.resolve(cssText);\n        }\n        const filteredCSSText = filterPreferredFontFormat(cssText, options);\n        return Promise.resolve(filteredCSSText)\n            .then(parseURLs)\n            .then((urls) => urls.reduce((deferred, url) => \n        // eslint-disable-next-line promise/no-nesting\n        deferred.then((css) => embed(css, url, baseUrl, options)), Promise.resolve(filteredCSSText)));\n    });\n}\n//# sourceMappingURL=embedResources.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { getBlobFromURL } from './getBlobFromURL';\nimport { embedResources } from './embedResources';\nimport { getMimeType, isDataUrl, makeDataUrl, toArray } from './util';\nfunction embedBackground(clonedNode, options) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const background = (_a = clonedNode.style) === null || _a === void 0 ? void 0 : _a.getPropertyValue('background');\n        if (!background) {\n            return Promise.resolve(clonedNode);\n        }\n        return Promise.resolve(background)\n            .then((cssString) => embedResources(cssString, null, options))\n            .then((cssString) => {\n            clonedNode.style.setProperty('background', cssString, clonedNode.style.getPropertyPriority('background'));\n            return clonedNode;\n        });\n    });\n}\nfunction embedImageNode(clonedNode, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!(clonedNode instanceof HTMLImageElement && !isDataUrl(clonedNode.src)) &&\n            !(clonedNode instanceof SVGImageElement &&\n                !isDataUrl(clonedNode.href.baseVal))) {\n            return Promise.resolve(clonedNode);\n        }\n        const src = clonedNode instanceof HTMLImageElement\n            ? clonedNode.src\n            : clonedNode.href.baseVal;\n        return Promise.resolve(src)\n            .then((url) => getBlobFromURL(url, options))\n            .then((data) => makeDataUrl(data.blob, getMimeType(src) || data.contentType))\n            .then((dataURL) => new Promise((resolve, reject) => {\n            clonedNode.onload = resolve;\n            clonedNode.onerror = reject;\n            if (clonedNode instanceof HTMLImageElement) {\n                clonedNode.srcset = '';\n                clonedNode.src = dataURL;\n            }\n            else {\n                clonedNode.href.baseVal = dataURL;\n            }\n        }))\n            .then(() => clonedNode, () => clonedNode);\n    });\n}\nfunction embedChildren(clonedNode, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const children = toArray(clonedNode.childNodes);\n        // eslint-disable-next-line no-use-before-define\n        const deferreds = children.map((child) => embedImages(child, options));\n        return Promise.all(deferreds).then(() => clonedNode);\n    });\n}\nexport function embedImages(clonedNode, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!(clonedNode instanceof Element)) {\n            return Promise.resolve(clonedNode);\n        }\n        return Promise.resolve(clonedNode)\n            .then((node) => embedBackground(node, options))\n            .then((node) => embedImageNode(node, options))\n            .then((node) => embedChildren(node, options));\n    });\n}\n//# sourceMappingURL=embedImages.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { toArray } from './util';\nimport { shouldEmbed, embedResources } from './embedResources';\nconst cssFetchCache = {};\nfunction fetchCSS(url) {\n    const cache = cssFetchCache[url];\n    if (cache != null) {\n        return cache;\n    }\n    const deferred = window.fetch(url).then((res) => ({\n        url,\n        cssText: res.text(),\n    }));\n    cssFetchCache[url] = deferred;\n    return deferred;\n}\nfunction embedFonts(meta) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return meta.cssText.then((raw) => {\n            let cssText = raw;\n            const regexUrl = /url\\([\"']?([^\"')]+)[\"']?\\)/g;\n            const fontLocs = cssText.match(/url\\([^)]+\\)/g) || [];\n            const loadFonts = fontLocs.map((location) => {\n                let url = location.replace(regexUrl, '$1');\n                if (!url.startsWith('https://')) {\n                    url = new URL(url, meta.url).href;\n                }\n                // eslint-disable-next-line promise/no-nesting\n                return window\n                    .fetch(url)\n                    .then((res) => res.blob())\n                    .then((blob) => new Promise((resolve, reject) => {\n                    const reader = new FileReader();\n                    reader.onloadend = () => {\n                        // Side Effect\n                        cssText = cssText.replace(location, `url(${reader.result})`);\n                        resolve([location, reader.result]);\n                    };\n                    reader.onerror = reject;\n                    reader.readAsDataURL(blob);\n                }));\n            });\n            // eslint-disable-next-line promise/no-nesting\n            return Promise.all(loadFonts).then(() => cssText);\n        });\n    });\n}\nfunction parseCSS(source) {\n    if (source == null) {\n        return [];\n    }\n    const result = [];\n    const commentsRegex = /(\\/\\*[\\s\\S]*?\\*\\/)/gi;\n    // strip out comments\n    let cssText = source.replace(commentsRegex, '');\n    const keyframesRegex = new RegExp('((@.*?keyframes [\\\\s\\\\S]*?){([\\\\s\\\\S]*?}\\\\s*?)})', 'gi');\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        const matches = keyframesRegex.exec(cssText);\n        if (matches === null) {\n            break;\n        }\n        result.push(matches[0]);\n    }\n    cssText = cssText.replace(keyframesRegex, '');\n    const importRegex = /@import[\\s\\S]*?url\\([^)]*\\)[\\s\\S]*?;/gi;\n    // to match css & media queries together\n    const combinedCSSRegex = '((\\\\s*?(?:\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\/)?\\\\s*?@media[\\\\s\\\\S]' +\n        '*?){([\\\\s\\\\S]*?)}\\\\s*?})|(([\\\\s\\\\S]*?){([\\\\s\\\\S]*?)})';\n    // unified regex\n    const unifiedRegex = new RegExp(combinedCSSRegex, 'gi');\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        let matches = importRegex.exec(cssText);\n        if (matches === null) {\n            matches = unifiedRegex.exec(cssText);\n            if (matches === null) {\n                break;\n            }\n            else {\n                importRegex.lastIndex = unifiedRegex.lastIndex;\n            }\n        }\n        else {\n            unifiedRegex.lastIndex = importRegex.lastIndex;\n        }\n        result.push(matches[0]);\n    }\n    return result;\n}\nfunction getCSSRules(styleSheets) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const ret = [];\n        const deferreds = [];\n        // First loop inlines imports\n        styleSheets.forEach((sheet) => {\n            if ('cssRules' in sheet) {\n                try {\n                    toArray(sheet.cssRules).forEach((item, index) => {\n                        if (item.type === CSSRule.IMPORT_RULE) {\n                            let importIndex = index + 1;\n                            const url = item.href;\n                            const deferred = fetchCSS(url)\n                                .then((metadata) => (metadata ? embedFonts(metadata) : ''))\n                                .then((cssText) => parseCSS(cssText).forEach((rule) => {\n                                try {\n                                    sheet.insertRule(rule, rule.startsWith('@import')\n                                        ? (importIndex += 1)\n                                        : sheet.cssRules.length);\n                                }\n                                catch (error) {\n                                    console.error('Error inserting rule from remote css', {\n                                        rule,\n                                        error,\n                                    });\n                                }\n                            }))\n                                .catch((e) => {\n                                console.error('Error loading remote css', e.toString());\n                            });\n                            deferreds.push(deferred);\n                        }\n                    });\n                }\n                catch (e) {\n                    const inline = styleSheets.find((a) => a.href == null) || document.styleSheets[0];\n                    if (sheet.href != null) {\n                        deferreds.push(fetchCSS(sheet.href)\n                            .then((metadata) => (metadata ? embedFonts(metadata) : ''))\n                            .then((cssText) => parseCSS(cssText).forEach((rule) => {\n                            inline.insertRule(rule, sheet.cssRules.length);\n                        }))\n                            .catch((err) => {\n                            console.error('Error loading remote stylesheet', err.toString());\n                        }));\n                    }\n                    console.error('Error inlining remote css file', e.toString());\n                }\n            }\n        });\n        return Promise.all(deferreds).then(() => {\n            // Second loop parses rules\n            styleSheets.forEach((sheet) => {\n                if ('cssRules' in sheet) {\n                    try {\n                        toArray(sheet.cssRules).forEach((item) => {\n                            ret.push(item);\n                        });\n                    }\n                    catch (e) {\n                        console.error(`Error while reading CSS rules from ${sheet.href}`, e.toString());\n                    }\n                }\n            });\n            return ret;\n        });\n    });\n}\nfunction getWebFontRules(cssRules) {\n    return cssRules\n        .filter((rule) => rule.type === CSSRule.FONT_FACE_RULE)\n        .filter((rule) => shouldEmbed(rule.style.getPropertyValue('src')));\n}\nfunction parseWebFontRules(node) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            if (node.ownerDocument == null) {\n                reject(new Error('Provided element is not within a Document'));\n            }\n            resolve(toArray(node.ownerDocument.styleSheets));\n        })\n            .then((styleSheets) => getCSSRules(styleSheets))\n            .then(getWebFontRules);\n    });\n}\nexport function getWebFontCSS(node, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return parseWebFontRules(node)\n            .then((rules) => Promise.all(rules.map((rule) => {\n            const baseUrl = rule.parentStyleSheet\n                ? rule.parentStyleSheet.href\n                : null;\n            return embedResources(rule.cssText, baseUrl, options);\n        })))\n            .then((cssTexts) => cssTexts.join('\\n'));\n    });\n}\nexport function embedWebFonts(clonedNode, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return (options.fontEmbedCSS != null\n            ? Promise.resolve(options.fontEmbedCSS)\n            : getWebFontCSS(clonedNode, options)).then((cssText) => {\n            const styleNode = document.createElement('style');\n            const sytleContent = document.createTextNode(cssText);\n            styleNode.appendChild(sytleContent);\n            if (clonedNode.firstChild) {\n                clonedNode.insertBefore(styleNode, clonedNode.firstChild);\n            }\n            else {\n                clonedNode.appendChild(styleNode);\n            }\n            return clonedNode;\n        });\n    });\n}\n//# sourceMappingURL=embedWebFonts.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { cloneNode } from './cloneNode';\nimport { embedImages } from './embedImages';\nimport { applyStyleWithOptions } from './applyStyleWithOptions';\nimport { embedWebFonts, getWebFontCSS } from './embedWebFonts';\nimport { getNodeWidth, getNodeHeight, getPixelRatio, createImage, canvasToBlob, nodeToDataURL, } from './util';\nfunction getImageSize(node, options = {}) {\n    const width = options.width || getNodeWidth(node);\n    const height = options.height || getNodeHeight(node);\n    return { width, height };\n}\nexport function toSvg(node, options = {}) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const { width, height } = getImageSize(node, options);\n        return Promise.resolve(node)\n            .then((nativeNode) => cloneNode(nativeNode, options, true))\n            .then((clonedNode) => embedWebFonts(clonedNode, options))\n            .then((clonedNode) => embedImages(clonedNode, options))\n            .then((clonedNode) => applyStyleWithOptions(clonedNode, options))\n            .then((clonedNode) => nodeToDataURL(clonedNode, width, height));\n    });\n}\nconst dimensionCanvasLimit = 16384; // as per https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas#maximum_canvas_size\nfunction checkCanvasDimensions(canvas) {\n    if (canvas.width > dimensionCanvasLimit ||\n        canvas.height > dimensionCanvasLimit) {\n        if (canvas.width > dimensionCanvasLimit &&\n            canvas.height > dimensionCanvasLimit) {\n            if (canvas.width > canvas.height) {\n                canvas.height *= dimensionCanvasLimit / canvas.width;\n                canvas.width = dimensionCanvasLimit;\n            }\n            else {\n                canvas.width *= dimensionCanvasLimit / canvas.height;\n                canvas.height = dimensionCanvasLimit;\n            }\n        }\n        else if (canvas.width > dimensionCanvasLimit) {\n            canvas.height *= dimensionCanvasLimit / canvas.width;\n            canvas.width = dimensionCanvasLimit;\n        }\n        else {\n            canvas.width *= dimensionCanvasLimit / canvas.height;\n            canvas.height = dimensionCanvasLimit;\n        }\n    }\n}\nexport function toCanvas(node, options = {}) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return toSvg(node, options)\n            .then(createImage)\n            .then((img) => {\n            const canvas = document.createElement('canvas');\n            const context = canvas.getContext('2d');\n            const ratio = options.pixelRatio || getPixelRatio();\n            const { width, height } = getImageSize(node, options);\n            const canvasWidth = options.canvasWidth || width;\n            const canvasHeight = options.canvasHeight || height;\n            canvas.width = canvasWidth * ratio;\n            canvas.height = canvasHeight * ratio;\n            if (!options.skipAutoScale) {\n                checkCanvasDimensions(canvas);\n            }\n            canvas.style.width = `${canvasWidth}`;\n            canvas.style.height = `${canvasHeight}`;\n            if (options.backgroundColor) {\n                context.fillStyle = options.backgroundColor;\n                context.fillRect(0, 0, canvas.width, canvas.height);\n            }\n            context.drawImage(img, 0, 0, canvas.width, canvas.height);\n            return canvas;\n        });\n    });\n}\nexport function toPixelData(node, options = {}) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const { width, height } = getImageSize(node, options);\n        return toCanvas(node, options).then((canvas) => {\n            const ctx = canvas.getContext('2d');\n            return ctx.getImageData(0, 0, width, height).data;\n        });\n    });\n}\nexport function toPng(node, options = {}) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return toCanvas(node, options).then((canvas) => canvas.toDataURL());\n    });\n}\nexport function toJpeg(node, options = {}) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return toCanvas(node, options).then((canvas) => canvas.toDataURL('image/jpeg', options.quality || 1));\n    });\n}\nexport function toBlob(node, options = {}) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return toCanvas(node, options).then(canvasToBlob);\n    });\n}\nexport function getFontEmbedCSS(node, options = {}) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return getWebFontCSS(node, options);\n    });\n}\n//# sourceMappingURL=index.js.map","export function applyStyleWithOptions(node, options) {\n    const { style } = node;\n    if (options.backgroundColor) {\n        style.backgroundColor = options.backgroundColor;\n    }\n    if (options.width) {\n        style.width = `${options.width}px`;\n    }\n    if (options.height) {\n        style.height = `${options.height}px`;\n    }\n    const manual = options.style;\n    if (manual != null) {\n        Object.keys(manual).forEach((key) => {\n            style[key] = manual[key];\n        });\n    }\n    return node;\n}\n//# sourceMappingURL=applyStyleWithOptions.js.map","export function elOrParentHasClass(element, classname) {\n  if (\n    typeof element.classList !== \"undefined\" &&\n    element.classList.contains(classname)\n  )\n    return true;\n  return (\n    element.parentNode && elOrParentHasClass(element.parentNode, classname)\n  );\n}\n\nexport function validateEl(element, classname) {\n  if (\n    typeof element.classList !== \"undefined\" &&\n    element.classList.contains(classname)\n  )\n    return element;\n  return validateEl(element.parentNode, classname);\n}\n\n","import \"shiny\";\nimport * as htmlToImage from \"html-to-image\";\nimport { saveAs } from \"file-saver\";\nimport * as utils from \"./utils\";\n\n(function() {\n  // IMAGE\n  function capureImage(event) {\n    var el = event.target;\n    if (!utils.elOrParentHasClass(el, \"btn-capture-screenshot\")) {\n      return;\n    }\n    el = utils.validateEl(el, \"btn-capture-screenshot\");\n    var ua = window.navigator.userAgent;\n    var msie = ua.indexOf(\"MSIE \");\n    if (msie > 0 || !!ua.match(/Trident.*rv\\:11\\./)) {\n      alert(\n        \"Screenshot functionnality is not available with Internet Explorer.\"\n      );\n      return;\n    }\n    el.classList.add(\"disabled\");\n    var toCapture = el.getAttribute(\"data-selector\");\n    var node = document.querySelector(toCapture);\n    var fileName = el.getAttribute(\"data-filename\");\n    var inputId = el.getAttribute(\"data-inputId\");\n    var scale = parseInt(el.getAttribute(\"data-scale\"));\n    var options = el.getAttribute(\"data-options\");\n    options = JSON.parse(options);\n    if (!isNaN(scale)) {\n      options.height = options.height\n        ? options.height * scale\n        : node.offsetHeight * scale;\n      options.width = options.width\n        ? options.width * scale\n        : node.offsetWidth * scale;\n      if (!options.hasOwnProperty(\"style\")) {\n        options.style = {};\n      }\n      options.style.transform = \"scale(\" + scale + \")\";\n      options.style.transformOrigin = \"top left\";\n      options.style.width = node.offsetWidth + \"px\";\n      options.style.height = node.offsetHeight + \"px\";\n    }\n    htmlToImage\n      .toBlob(node, options)\n      .then(function(blob) {\n        if (fileName !== null) {\n          saveAs(blob, fileName);\n        }\n        if (inputId !== null) {\n          var reader = new FileReader();\n          reader.readAsDataURL(blob);\n          reader.onloadend = function() {\n            var base64data = reader.result;\n            Shiny.setInputValue(inputId, base64data);\n          };\n        }\n        el.classList.remove(\"disabled\");\n      })\n      .catch(function(error) {\n        console.error(\"Capture: oops, something went wrong!\", error);\n      });\n  }\n  function capureImage_(event) {\n    try {\n      capureImage(event);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  document.addEventListener(\"click\", capureImage_);\n})();\n\n"],"names":["c","a","b","d","XMLHttpRequest","open","responseType","onload","g","response","onerror","console","error","send","status","e","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","global","navigator","test","userAgent","saveAs","HTMLAnchorElement","prototype","h","i","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","autoBom","warn","type","Blob","title","body","innerText","HTMLElement","safari","FileReader","k","onloadend","result","replace","readAsDataURL","l","m","module","exports","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","call","globalThis","this","Function","Shiny","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","done","then","apply","WOFF","JPEG","mimes","woff","woff2","ttf","eot","png","jpg","jpeg","gif","tiff","svg","getMimeType","url","extension","match","exec","getExtension","toLowerCase","isDataUrl","search","makeDataUrl","content","mimeType","uuid","counter","Math","random","pow","toString","slice","toArray","arrayLike","arr","length","push","px","node","styleProperty","val","getComputedStyle","getPropertyValue","parseFloat","canvasToBlob","canvas","toBlob","binaryString","atob","toDataURL","split","len","binaryArray","Uint8Array","charCodeAt","createImage","img","Image","crossOrigin","decoding","src","cache","getBlobFromURL","options","cacheKey","key","getCacheKey","cacheBust","Date","getTime","deferred","fetch","res","blob","contentType","headers","get","reader","dataURL","catch","reason","placeholder","imagePlaceholder","parts","msg","message","clonePseudoElement","nativeNode","clonedNode","pseudo","style","className","err","styleElement","appendChild","selector","cssText","formatCSSText","map","getPropertyPriority","join","formatCSSProperties","createTextNode","getPseudoElementStyle","cloneNode","isRoot","filter","HTMLCanvasElement","cloneCanvasElement","HTMLVideoElement","poster","data","cloneVideoElement","cloneSingleNode","_a","children","tagName","toUpperCase","assignedNodes","shadowRoot","childNodes","reduce","child","clonedChild","cloneChildren","Element","source","forEach","setProperty","cloneCSSStyle","clonePseudoElements","HTMLTextAreaElement","innerHTML","HTMLInputElement","setAttribute","cloneInputValue","decorate","URL_REGEX","URL_WITH_FORMAT_REGEX","FONT_SRC_REGEX","parseURLs","raw","quotation","shouldEmbed","embedResources","baseUrl","filteredCSSText","str","preferredFontFormat","format","filterPreferredFontFormat","urls","css","resourceURL","baseURL","resolvedURL","protocol","doc","implementation","createHTMLDocument","base","head","resolveUrl","escaped","RegExp","toRegex","embedImages","background","cssString","embedBackground","HTMLImageElement","SVGImageElement","baseVal","srcset","embedImageNode","deferreds","all","embedChildren","cssFetchCache","fetchCSS","text","embedFonts","meta","regexUrl","loadFonts","startsWith","parseCSS","keyframesRegex","matches","importRegex","unifiedRegex","lastIndex","getWebFontRules","cssRules","rule","CSSRule","FONT_FACE_RULE","embedWebFonts","fontEmbedCSS","ownerDocument","Error","styleSheets","ret","sheet","item","index","IMPORT_RULE","importIndex","metadata","insertRule","inline","find","getCSSRules","parseWebFontRules","rules","parentStyleSheet","cssTexts","styleNode","sytleContent","firstChild","insertBefore","getImageSize","width","leftBorder","rightBorder","clientWidth","getNodeWidth","height","topBorder","bottomBorder","clientHeight","getNodeHeight","toSvg","backgroundColor","manual","Object","keys","applyStyleWithOptions","xmlns","createElementNS","foreignObject","XMLSerializer","serializeToString","encodeURIComponent","html","svgToDataURL","nodeToDataURL","dimensionCanvasLimit","elOrParentHasClass","element","classname","classList","contains","parentNode","validateEl","capureImage","event","el","ua","indexOf","alert","add","toCapture","getAttribute","querySelector","fileName","inputId","scale","parseInt","JSON","parse","isNaN","offsetHeight","offsetWidth","hasOwnProperty","transform","transformOrigin","context","getContext","ratio","pixelRatio","FINAL_PROCESS","process","env","devicePixelRatio","Number","getPixelRatio","canvasWidth","canvasHeight","skipAutoScale","checkCanvasDimensions","fillStyle","fillRect","drawImage","toCanvas","base64data","setInputValue","remove","addEventListener"],"sourceRoot":""}